<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>çµµæœ¬ãƒ“ãƒ¥ãƒ¼ã‚¢</title>

<style>
  @font-face {
    font-family: "DQFont";
    src: url("fonts/DQFont.ttf") format("truetype");
  }

  body {
    margin: 0;
    background: #202020;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100vh;
    font-family: "DQFont", sans-serif;
  }

  #book {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 95%;
    max-width: 1000px;
    margin: 10px auto;
    background: #101010;
    border: 4px solid #c0a060;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    padding: 10px;
  }

  #viewer {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    transition: transform 0.6s ease;
  }

  img.book-page {
    max-width: 100%;
    max-height: 45vh;
    object-fit: contain;
    display: block;
    border-radius: 8px;
  }

  #textBox {
    margin-top: 10px;
    font-size: clamp(14px, 2.2vw, 18px);
    line-height: 1.9;
    letter-spacing: 1.3px;
    text-align: left;
    background: #000;
    border: 4px double #fff;
    border-radius: 8px;
    padding: 15px;
    white-space: pre-line;
    width: 100%;
    max-height: 28vh;
    overflow-y: auto;
  }

  #controls {
    margin: 12px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
  }

  button {
    background: #c0a060;
    color: #000;
    border: none;
    padding: 10px 20px;
    font-size: clamp(12px, 2vw, 16px);
    border-radius: 6px;
    cursor: pointer;
    font-family: "DQFont", sans-serif;
    transition: background 0.3s;
  }

  button:hover:not(:disabled) {
    background: #e0c070;
  }

  button:disabled {
    background: #555;
    cursor: not-allowed;
    color: #999;
  }

  .flip-left { transform: rotateY(-90deg); }
  .flip-right { transform: rotateY(90deg); }

  /* æ¨ªå‘ãç”»é¢ã§ã¯ç”»åƒã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¨ªä¸¦ã³ã« */
  @media (min-width: 768px) and (orientation: landscape) {
    #book {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
      padding: 20px;
    }
    #viewer, #textBox {
      flex: 1;
      margin: 10px;
      max-height: 70vh;
    }
    #textBox {
      font-size: clamp(14px, 1.6vw, 20px);
    }
  }
</style>
</head>
<body>
  <audio id="bgm" src="bgm.mp3" loop></audio>

  <div id="book">
    <div id="viewer">
      <img id="pageImage" class="book-page" src="" alt="çµµæœ¬ãƒšãƒ¼ã‚¸">
    </div>
    <div id="textBox"></div>
  </div>

  <div id="controls">
    <button id="prevBtn">â—€ ã¾ãˆã¸</button>
    <button id="nextBtn">ã¤ãã¸ â–¶</button>
    <button id="soundBtn">ğŸ”Š ã‚µã‚¦ãƒ³ãƒ‰é–‹å§‹</button>
  </div>

<script>
  const pages = [
    { img: "images/page01.png", text: "å¤œã®é™ã‹ãªéƒ¨å±‹ã§ã€ãŠå…„ã•ã‚“ã¯å¦¹ã«ç‰©èªã‚’èª­ã¿èã‹ã›ã¦ã„ã¾ã—ãŸã€‚\nçª“ã®å¤–ã«ã¯ã€ç¾¤é’è‰²ã®ç©ºã«æ˜Ÿã€…ãŒãã‚‰ã‚ãã€è™«ãŸã¡ã®å£°ãŒã‹ã™ã‹ã«éŸ¿ãã¾ã™ã€‚\nå¦¹ã¯å¸ƒå›£ã«åŒ…ã¾ã‚Œã€ãŠå…„ã•ã‚“ã®å£°ã«å®‰å¿ƒã—ã¦è€³ã‚’å‚¾ã‘ã¾ã—ãŸã€‚" },
    { img: "images/page02.png", text: "ç‰©èªã®ä¸»äººå…¬ã®å°‘å¹´ã¯ã€å‹‡æ°—ã‚’èƒ¸ã«æ—…ç«‹ã¡ã¾ã—ãŸã€‚\næ£®ã®å°é“ã«å…¥ã‚‹ã¨æœ¨æ¼ã‚Œæ—¥ãŒå·®ã—ã€ãƒªã‚¹ã‚„å°é³¥ãŒé›†ã¾ã‚Šã¾ã™ã€‚\nã€Œå›ã‚’å¾…ã£ã¦ã„ãŸã‚“ã ã‚ˆã€â€•â€•ãã‚“ãªç³ã§å‹•ç‰©ãŸã¡ã¯å½¼ã‚’è¦‹ã¤ã‚ã¾ã—ãŸã€‚" },
    { img: "images/page03.png", text: "ã‘ã‚Œã©æ£®ã¯å„ªã—ã„ã°ã‹ã‚Šã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\næœ¨ã€…ã®é–“ã«å·¨å¤§ãªèœ˜è››ã®å·£ãŒå¼µã‚Šå·¡ã‚‰ã•ã‚Œã€å…‰ã‚‹å£ã®ã‚ˆã†ã«ç«‹ã¡ã¯ã ã¡ã¾ã—ãŸã€‚\nä¸­å¿ƒã«ã¯é»’ã„å½±ãŒã˜ã£ã¨å°‘å¹´ã‚’è¦‹ä¸‹ã‚ã—ã¦ã„ã¾ã—ãŸã€‚" },
    { img: "images/page04.png", text: "ãã®ã¨ãã€æã®ä¸Šã‹ã‚‰å°ã•ãªãƒªã‚¹ãŒå£°ã‚’ã‚ã’ã¾ã—ãŸã€‚\nã€Œæ€–ãŒã‚‰ãªã„ã§ã€â€•â€•åŠ±ã¾ã™ã‚ˆã†ã«å°¾ã‚’æºã‚‰ã—ã¾ã™ã€‚\nå°‘å¹´ã®èƒ¸ã«ã»ã‚“ã®å°‘ã—å‹‡æ°—ãŒã¨ã‚‚ã‚Šã¾ã—ãŸã€‚" },
    { img: "images/page05.png", text: "ã—ã‹ã—èœ˜è››ã®å½±ã¯æ¿ƒããªã‚Šã€ç³¸ã¯é¢¨ã«éœ‡ãˆã¦ä¸æ°—å‘³ãªéŸ³ã‚’ç«‹ã¦ã¾ã—ãŸã€‚\nå°‘å¹´ã¯å¿ƒè‡“ãŒæ—©é˜ã‚’æ‰“ã¤ã®ã‚’æ„Ÿã˜ãªãŒã‚‰ã€ã©ã†é€²ã‚€ã¹ãã‹è¿·ã„ã¾ã—ãŸã€‚" },
    { img: "images/page06.png", text: "ãã®æ™‚ã§ã™ã€‚æ£®ã®å¥¥ã‹ã‚‰ã€ã‹ã™ã‹ãªå£°ãŒèã“ãˆã¾ã—ãŸã€‚\nã€ã“ã£ã¡ã ã‚ˆâ€¦ ã“ã£ã¡ã ã‚ˆâ€¦ã€\nãã®å£°ã¯æ‡ã‹ã—ãã€å…‰ã®ç²’ã®ã‚ˆã†ã«æŸ”ã‚‰ã‹ã§ã—ãŸã€‚" },
    { img: "images/page07.png", text: "å£°ã‚’ãŸã©ã‚‹ã¨ã€é’ç™½ãå…‰ã‚‹å®çŸ³ã‚’æŒã¤å°‘å¥³ãŒã„ã¾ã—ãŸã€‚\nãã®å…‰ã¯å¦¹ã®ç¬‘é¡”ã‚’æ€ã„å‡ºã•ã›ã€å°‘å¹´ã«æ—…ã®æ„å‘³ã‚’æ€ã„å‡ºã•ã›ã¾ã—ãŸã€‚" },
    { img: "images/page08.png", text: "å°‘å¥³ãŒå®çŸ³ã‚’æ²ã’ã‚‹ã¨ã€å¤œç©ºã«å…‰ã®æŸ±ãŒç«‹ã¡ã®ã¼ã‚Šã¾ã—ãŸã€‚\nå…‰ã¯é ã„å±±ã®é ‚ã¸ä¼¸ã³ã€äºŒäººã®å¿ƒã‚’ã²ã¨ã¤ã«ã—ã¾ã—ãŸã€‚" },
    { img: "images/page09.png", text: "é™ºã—ã„å±±é“ã‚’é€²ã¿ãªãŒã‚‰ã€äºŒäººã¯äº’ã„ã«åŠ±ã¾ã—åˆã„ã¾ã—ãŸã€‚\nãƒªã‚¹ã‚‚ã¤ã„ã¦ãã¦ã€ãã®å­˜åœ¨ãŒå¿ƒã‚’å¼·ãã—ã¾ã—ãŸã€‚\nã‚„ãŒã¦æ¾„ã‚“ã ç©ºæ°—ã¨æ˜Ÿã®è¼ããŒå½¼ã‚‰ã‚’è¿ãˆã¾ã—ãŸã€‚" },
    { img: "images/page10.png", text: "å±±é ‚ã«ãŸã©ã‚Šç€ã„ãŸã¨ãã€ç¿¼ã‚’åºƒã’ãŸå·¨å¤§ãªé³¥ãŒã„ã¾ã—ãŸã€‚\nãã®ç¾½ã¯æ˜Ÿå±‘ã‚’ã¾ã¨ã„ã€å¤œç©ºã®ä¸­ã§ç¥ã€…ã—ãè¼ã„ã¦ã„ã¾ã—ãŸã€‚" },
    { img: "images/page10.png", text: "äºŒäººãŒå®çŸ³ã‚’ã‹ã–ã™ã¨ã€é³¥ã¯å…‰ã‚’ã¾ã¨ã„å¤œç©ºã¸èˆã„ä¸ŠãŒã‚Šã¾ã—ãŸã€‚\nè¼ãã¯æ£®ã‚‚å±±ã‚‚ã€ç”Ÿãç‰©ã‚‚åŒ…ã¿è¾¼ã¿ã¾ã—ãŸã€‚\nå°‘å¹´ã¯æ°—ã¥ãã¾ã—ãŸâ€•â€•å‹‡æ°—ã“ããŒä»²é–“ã‚’çµã¶å…‰ã ã£ãŸã®ã ã¨ã€‚" },
    { img: "images/page10.png", text: "ç‰©èªã®æœ€å¾Œã®ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ãŸã¨ãã€å¦¹ã¯ã™ã§ã«çœ ã£ã¦ã„ã¾ã—ãŸã€‚\nçª“ã®å¤–ã®ä¸€ç•ªæ˜Ÿã¯ã€ã¾ã‚‹ã§é³¥ãŒç¾½ã°ãŸã„ãŸè¨¼ã®ã‚ˆã†ã«è¼ã„ã¦ã„ã¾ã—ãŸã€‚" }
  ];

  let currentPage = 0;
  const pageImage = document.getElementById("pageImage");
  const textBox = document.getElementById("textBox");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const viewer = document.getElementById("viewer");
  const bgm = document.getElementById("bgm");
  let audioCtx = null;

  function playFlipSound() {
    if (!audioCtx) return;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = "triangle";
    osc.frequency.setValueAtTime(200, audioCtx.currentTime);
    osc.frequency.linearRampToValueAtTime(800, audioCtx.currentTime + 0.2);
    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.3);
  }

  function renderPage(animation) {
    if (animation) {
      viewer.classList.add(animation);
      setTimeout(() => {
        viewer.classList.remove(animation);
        updateContent();
      }, 300);
    } else {
      updateContent();
    }
  }

  function updateContent() {
    const page = pages[currentPage];
    pageImage.src = page.img;
    pageImage.alt = page.text;
    textBox.textContent = page.text;
    prevBtn.disabled = currentPage === 0;
    nextBtn.disabled = currentPage === pages.length - 1;
  }

  prevBtn.addEventListener("click", () => {
    if (currentPage > 0) {
      currentPage--;
      renderPage("flip-left");
      playFlipSound();
    }
  });

  nextBtn.addEventListener("click", () => {
    if (currentPage < pages.length - 1) {
      currentPage++;
      renderPage("flip-right");
      playFlipSound();
    }
  });

  document.getElementById("soundBtn").addEventListener("click", () => {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    bgm.play();
    alert("ã‚µã‚¦ãƒ³ãƒ‰ã‚’é–‹å§‹ã—ã¾ã—ãŸ ğŸµ");
  });

  renderPage();
</script>
</body>
</html>
